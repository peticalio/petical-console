<div class="layout-max-width">
  <md-toolbar md-theme="content" class="pt">
    <div class="md-toolbar-tools">
      <h1 class="md-title">商品・料金マスタ登録フォーム</h1>
    </div>
  </md-toolbar>
  <div layout-padding>
    <div class="flat-card">
      <form name="form" role="form" novalidate>
        <div layout="row" layout-wrap>
          <md-input-container class="md-block" flex="50" flex-xs="100">
            <label>商品名（診察名）</label>
            <input name="name" ng-model="ctrl.product.name" maxlength="50" ng-required="true" ng-maxlength="50"></input>
            <div ng-show="form.name.$invalid" ng-messages="form.name.$error">
              <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                <span>50 文字以内で入力してください。</span>
              </div>
            </div>
          </md-input-container>
          <div flex="50" hide-xs></div>
          <md-input-container class="md-block" flex="25" flex-xs="50">
            <label>価格（単価）</label>
            <input name="price" type="number" ng-model="ctrl.product.price" ng-required="true" min="0" max="9999999"></input>
            <div ng-show="form.price.$invalid" ng-messages="form.price.$error">
              <div ng-message-exp="['required', 'min', 'max', 'pattern']">
                <span>0 - 9,999,999 の間で入力してください。</span>
              </div>
            </div>
          </md-input-container>
          <md-input-container class="md-block" flex="25" flex-xs="50">
            <label>消費税区分</label>
            <md-select ng-model="ctrl.product.taxType">
              <md-option ng-repeat="type in ctrl.taxTypes" value="{{type.value}}">
                {{type.name}}
              </md-option>
            </md-select>
          </md-input-container>
          <md-input-container class="md-block" flex="25" flex-xs="50">
            <label>消費税率</label>
            <input name="taxRate" ng-model="ctrl.product.taxRate" ng-required="true" ng-disabled="true"></input>
            <div ng-show="form.taxRate.$invalid" ng-messages="form.memo.$error">
              <p class="help-block" ng-show="form.taxRate.$error">
                <span>0.01 〜 1.00 までの数値で入力してください。</span>
              </p>
            </div>
          </md-input-container>
          <div flex="25" hide-xs></div>
          <md-input-container class="md-block" flex="100">
            <label>説明</label>
            <textarea name="description" ng-model="ctrl.product.description" maxlength="2000" md-maxlength="2000" rows="5"></textarea>
            <div ng-show="form.description.$invalid" ng-messages="form.description.$error">
              <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
                <span>2000 文字以内で入力してください。</span>
              </div>
            </div>
          </md-input-container>
        </div>
        <div layout="row" layout-align="end center" ng-if="!ctrl.product.id">
          <md-button class="md-primary md-raised" ng-disabled="form.$invalid" ng-click="ctrl.save(ctrl.product)">登録する</md-button>
          <md-button ui-sref="app.dashboard.product.list">キャンセル</md-button>
        </div>
        <div layout="row" layout-align="end center" ng-if="ctrl.product.id">
          <md-button class="md-primary md-raised" ng-disabled="form.$invalid" ng-click="ctrl.update(ctrl.product)">更新する</md-button>
          <md-button ui-sref="app.dashboard.product.detail({productId: ctrl.product.id})">キャンセル</md-button>
        </div>
      </form>
    </div>
  </div>
</div>
